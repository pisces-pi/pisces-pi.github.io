---
title: 数学知识
date: 2021-12-28 22:00:00
math: true
---

# 数学知识
## 1.函数
- ### 缓动函数
  1. 缓入/缓出函数的切换：
      - 设缓入函数为$f(x)$，缓出函数为$g(x)$，则$g(x)=1-f(1-x)$
  1. 缓入缓出函数的构造(定义域在$[0,1]$)：
      - 设原始的缓入函数和缓出函数为$f(x)$和$g(x)$
      - 设变换后的缓入函数和缓出函数为$F(x)$和$G(x)$
      - 则可构造缓入缓出函数：$\begin{cases}F(x)=\frac{f(2x)}{2}, x\in{[0, 0.5]} \\ G(x)=\frac{g(2(x-0.5))}{2}+0.5, x\in{[0.5, 1]}\end{cases}$；可对x做$round(x)$操作后，以其为alpha进行线性插值，避免产生分段
  2. 几种缓动函数
      - SmoothStep:  
        - 图像：<img src='/数学知识/SmoothStep.png' width='30%'>
        - 先令$f(x)=saturate(\frac{x-t_1}{t_2-t_1})$；$t_1$和$t_2$是函数值为0与1处的横坐标值
        - 则SmoothStep为$F(x)=f(x)^2*(3-2f(x))$
        - 当使两个SmoothStep相减时，可得到缓入缓出分布在两端的结果：<img src='/数学知识/SmoothStepMinus.png' width='30%'>
      - 最简单的EaseIn/EaseOut:
          - $f(x)=x^2$<img src='/数学知识/x^2.png' width='30%'>
          - $g(x)=2x-x^2$<img src = '/数学知识/2x-x^2.png' width='30%'>
      - 较缓的EaseIn/EaseOut:
        - $f(x)=1-sin(\frac{\pi}{2}(1-x))$<img src = '/数学知识/1-sin(frac{pi}{2}(1-x)).png' width='30%'>
        - $g(x)=sin(\frac{\pi}{2}x)$<img src = '/数学知识/sin(frac{pi}{2}x).png' width='30%'>
      - 迅速的EaseIn/EaseOut:
        - $f(x)=1-\sqrt{1-x^2}$<img src = '/数学知识/1-sqrt{1-x^2}.png' width='30%'>
        - $g(x)=\sqrt{2x-x^2}$<img src = '/数学知识/sqrt{2x-x^{2}}.png' width='30%'>
      - BackEaseIn/EaseOut：端点略有收回
        - $f(x)=1-f(1-x)$<img src = '/数学知识/1-f(1-x).png' width='30%'>
        - $g(x)=x^b+kxsin(\pi{}x)$<img src = '/数学知识/x^{b}-kxsin(pi x).png' width='30%'>
        
  
- ### 周期函数
  1. 扫描线型非连续周期函数
      - $f(x)=mod(kx, b)$->$f(x)\in{[0, b]}$；k为$x\in{[tb, tb+b]},t\in{N}$时单次变化的重复次数<img src = '/数学知识/mod(kx, b).png' width='30%'>
  2. 线性连续周期函数
      - $f(x)=abs(mod(2kx-1, 2)-1)$，k用于控制函数的频率<img src = '/数学知识/abs(mod(2kx-1, 2)-1).png' width='30%'>
  3. 非线性周期函数
      - $f(x)=abs(sin(k\pi{x}))$<img src = '/数学知识/abs(sin(kpi{x})).png' width='30%'>

- ### 实用函数
  1. 抛物线
      - 函数原型：$f(x) = \frac{(x-a)^2-a^2}{-2b}$<img src = '/数学知识/frac{(x-a)^{2}-a^{2}}{-2b}.png' width='30%'>
      - 该抛物线于x轴相交于原点和$(2a,0)$点
      - b可用于控制抛物线的弧度
  2. 振荡函数
      - $f(x)=\frac{n^xsin(2k\pi{x}+\frac{\pi}{2})}{t}$<img src = '/数学知识/frac{n^xsin(2kpi{x}+frac{pi}{2})}{t}.png' width='30%'>；n控制振荡衰减/增益的速度、k控制振荡的频率、t控制振荡的幅度
  3. 函数离散化，可用于表示次数
      - 设原函数为$f(x)$，离散化后的函数为$g(x)$，则：$g(x)=f(x)+mod(-f(x),a)$，a为对f(x)的在y轴上的采样周期；以sinx为例：<img src = '/数学知识/f(x)+mod(-f(x),a).png' width='30%'>
  4. 弹跳Bounce
      - 图像：<img src = '/数学知识/Bounce.png' width='30%'>
      - 函数原型为：$f(x)=c^2-(ax-b)^2$
      - 设t为弹跳次数、p为衰减周期、l为衰减程度
      - 设中间变量$n=(1-\sqrt{1-x^p}+mod(\sqrt{1-x^p}, \frac{1}{t}))*t$
      - 则每次弹跳高度 $c^2=(1-\frac{n-1}{t})^l$
      - 设函数与y轴交点横坐标为$x_0$和$x_1$，则$x_0=\sqrt[p]{1-(1-\frac{n-1}{t})^2};x_1=\sqrt[p]{1-(1-\frac{n}{t})^2}$
      - 最后，令$a=\frac{2c}{x_1-x_0};b=ax_0+c$
  5. 使能(Enable)函数
      - 图像：<img src = '/数学知识/EnableFunc.png' width='30%'>
      - 简版：$f(x)=ceil(sin(k\pi{x}))$
      - k为使能切换的次数的1/2
      - 繁版：$f(x)=min(floor(\frac{abs(mod(2kx-p, 2)-1)}{1-p}), 1)$
      - k为使能切换的次数
      - p为1值在切换过程中所占比例
  6. 阶梯函数
      - 图像：<img src = '/数学知识/StairFunc.png' width='30%'>
      - 自增的离散函数：$d(x)=x+mod(-x, \frac{1}{n})$
      - 平移自增函数：$t(x)=(x-\frac{1}{n})+mod(\frac{1}{n}-x, \frac{1}{n})$
      - 自增的扫描线式函数：$s(x)=mod(2x, \frac{2}{n})+t(x)$
      - 阶梯函数：$f(x)=min(s(x),d(x))$，n表示0-1内的阶梯数；x可变为其他函数以实现任意函数的阶梯化